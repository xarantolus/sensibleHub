function trimChar(t,n){for(;t.charAt(0)==n;)t=t.substring(1);for(;t.charAt(t.length-1)==n;)t=t.substring(0,t.length-1);return t}function isListingPage(){return location.pathname.startsWith("/album/")||location.pathname.startsWith("/artist/")||-1!==["/","/songs","/artists","/years","/incomplete","/search"].indexOf(location.pathname)}var isReload=!1,oldX=0,oldY=0;InstantClick.go=function(t){oldX=window.scrollX,oldY=window.scrollY;var n=document.createElement("a");n.href=t,document.body.appendChild(n),n.click()},InstantClick.on("change",function(){isReload&&(isReload=!1,window.scrollTo(oldX,oldY))});var ajax=function(t,n){var e=function(e,r){var o=new XMLHttpRequest;o.open(e,t,!0),o.setRequestHeader("X-XHR","true");var a=null;return"POST"===e&&n&&("entries"in n?a=n:(o.setRequestHeader("Content-Type","application/json"),a=JSON.stringify(n))),o.onreadystatechange=function(){if(4===o.readyState&&o.status>0){try{var t=JSON.parse(o.responseText)}catch(t){return void r(422,{message:o.responseText})}r(o.status,t)}},o.onerror=function(){r(503,{message:"Error while connecting."})},o.send(a),o};return{get:function(t){return e("GET",t)},post:function(t){return e("POST",t)}}};