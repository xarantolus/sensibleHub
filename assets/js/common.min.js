function trimChar(n,e){for(;n.charAt(0)==e;)n=n.substring(1);for(;n.charAt(n.length-1)==e;)n=n.substring(0,n.length-1);return n}function isListingPage(){return-1!==["/","/songs","/artists","/years","/incomplete","/search"].indexOf(location.pathname)}var isReload=!1,oldX=0,oldY=0;InstantClick.go=function(n){oldX=window.scrollX,oldY=window.scrollY;var e=document.createElement("a");e.href=n,document.body.appendChild(e),e.click()},InstantClick.on("change",function(){isReload&&(isReload=!1,window.scrollTo(oldX,oldY))});var ajax=function(n,e){var t=function(t,r){var o=new XMLHttpRequest;o.open(t,n,!0),o.setRequestHeader("X-XHR","true");var s=null;return"POST"===t&&e&&("entries"in e?s=e:(o.setRequestHeader("Content-Type","application/json"),s=JSON.stringify(e))),o.onreadystatechange=function(){if(4===o.readyState&&o.status>0){try{var n=JSON.parse(o.responseText)}catch(n){return void r(422,{message:o.responseText})}r(o.status,n)}},o.onerror=function(){r(503,{message:"Error while connecting."})},o.send(s),o};return{get:function(n){return t("GET",n)},post:function(n){return t("POST",n)}}};