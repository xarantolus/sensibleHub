function trimChar(e,t){for(;e.charAt(0)==t;)e=e.substring(1);for(;e.charAt(e.length-1)==t;)e=e.substring(0,e.length-1);return e}function isListingPage(){return location.pathname.startsWith("/album/")||location.pathname.startsWith("/artist/")||-1!==["/","/songs","/artists","/years","/incomplete","/search"].indexOf(location.pathname)}function registerCover(){function e(e){var t=e.target.files;if(1==t.length){document.getElementById("cover-upload-button").innerHTML=t[0].name;var n=document.getElementById("song-cover");n.src=window.URL.createObjectURL(t[0])}}function t(e){"input"!=e.target.tagName&&"LABEL"!==e.target.tagName&&"BUTTON"!=e.target.tagName&&document.querySelector(".file-input").click()}document.getElementById("song-cover-input").addEventListener("change",e),(document.querySelector(".song-image-container")||document.querySelector(".album-image-container")).addEventListener("click",t)}var isReload=!1,oldX=0,oldY=0;InstantClick.go=function(e){oldX=window.scrollX,oldY=window.scrollY;var t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click()},InstantClick.on("change",function(){isReload&&(isReload=!1,window.scrollTo(oldX,oldY))});var ajax=function(e,t){var n=function(n,r){var o=new XMLHttpRequest;o.open(n,e,!0),o.setRequestHeader("X-XHR","true");var a=null;return"POST"===n&&t&&("entries"in t?a=t:(o.setRequestHeader("Content-Type","application/json"),a=JSON.stringify(t))),o.onreadystatechange=function(){if(4===o.readyState&&o.status>0){try{var e=JSON.parse(o.responseText)}catch(e){return void r(422,{message:o.responseText})}r(o.status,e)}},o.onerror=function(){r(503,{message:"Error while connecting."})},o.send(a),o};return{get:function(e){return n("GET",e)},post:function(e){return n("POST",e)}}};