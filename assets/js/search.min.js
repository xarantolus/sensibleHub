function initSearch(){function e(e){e?t.classList.add("is-loading"):t.classList.remove("is-loading")}var n=document.getElementById("search-bar"),t=document.getElementById("search-container"),a=document.getElementById("search-form");a.onsubmit=function(t){t.preventDefault(),isSearch=!0,isReload=!0,e(!0),InstantClick.go("/search?q="+encodeURIComponent(n.value))}}function focusSearch(){var e=document.getElementById("search-bar");e&&(e.value.endsWith(" ")||0===e.value.length||(e.value+=" "),e.setSelectionRange(e.value.length,e.value.length),e.focus())}var isSearch=!1,nextUrl=null;InstantClick.on("change",function(){isSearch=!1,isReload=!1,nextUrl?(history.replaceState("","",nextUrl),nextUrl=null):isSearch&&focusSearch()}),InstantClick.on("receive",function(e,n,t){if(isSearch){var a=n.querySelector("#song-id");return a&&(nextUrl="/song/"+a.value),{body:n,title:t}}});