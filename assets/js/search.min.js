var isSearch=!1,nextUrl=null;function initSearch(){var sb=document.getElementById("search-bar"),sc=document.getElementById("search-container"),sf;function setLoading(l){l?sc.classList.add("is-loading"):sc.classList.remove("is-loading")}document.getElementById("search-form").onsubmit=function(evt){evt.preventDefault(),isSearch=!0,isReload=!0,setLoading(!0),InstantClick.go("/search?q="+encodeURIComponent(sb.value))}}function focusSearch(){var sb=document.getElementById("search-bar");sb&&(document.querySelector(".navbar-burger").classList.toggle("is-active"),document.querySelector(".navbar-menu").classList.toggle("is-active"),sb.value.endsWith(" ")||0===sb.value.length||(sb.value+=" "),sb.setSelectionRange(sb.value.length,sb.value.length),sb.focus())}InstantClick.on("change",(function(){isSearch=!1,isReload=!1,nextUrl?(history.replaceState("","",nextUrl),nextUrl=null):(window.scrollY=0,isSearch&&focusSearch())})),InstantClick.on("receive",(function(url,body,title){if(isSearch){var song=body.querySelector("#song-id");return song&&(nextUrl="/song/"+song.value),{body:body,title:title}}}));